<template>
	<view class="content">
		<text><text>123123</text></text>
		<Foo data='123' :num='10' str='str' :obj='{a: 2}' :arr='[1,1,1]'>
			<template v-slot="defaultProps">
				<view class="test">
					<text class="c-red">defaultProps: {{ defaultProps.msg }}</text>
				</view>
			</template>
			<template #header="headerProps">
				<text>defaultProps: {{ headerProps.msg }}</text>
			</template>
		</Foo>
		<text class="bg" @click="test">bg in index</text>
		<text>num: {{num}}</text>
		<button @click="test2">test2</button>
	</view>
</template>

<script lang="ts">
import Foo from '../../components/Foo.vue'
export default {
	components: { Foo },
	data() {
		return {
			title: 'title',
			num: 1
		}
	},
	onReady(){
		const app = getApp()
		app.test()
	},
	methods:{
		test(){
			console.log(this.$data.get('title'))
			const pages = getCurrentPages()
			const page = pages[pages.length-1]
			console.log(page.$children[0].$callMethod('handler'))
		},
		test2(){
			this.num++
			if(this.num<5){
				this.test2()
			}
		}
	}
}
</script>
<style lang="scss">
.test {
	width: 200px;
	height: 100px;
	background-color: green;
}

.c-red {
	color: red;
}
.bg{background-color: red;}
</style>
